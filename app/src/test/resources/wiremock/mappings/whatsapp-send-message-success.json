{
  "name": "Send WhatsApp Text Message - Success",
  "request": {
    "method": "POST",
    "urlPathPattern": "/v22.0/[^/]+/messages",
    "bodyPatterns": [
      {
        "matchesJsonPath": "$.messaging_product",
        "equalTo": "whatsapp"
      },
      {
        "matchesJsonPath": "$.recipient_type",
        "equalTo": "individual"
      },
      {
        "matchesJsonPath": "$.to"
      },
      {
        "matchesJsonPath": "$.type",
        "equalTo": "text"
      },
      {
        "matchesJsonPath": "$.text.body"
      }
    ]
  },
  "response": {
    "status": 200,
    "headers": {
      "Content-Type": "application/json"
    },
    "jsonBody": {
      "messaging_product": "whatsapp",
      "contacts": [
        {
          "input": "${jsonPath request.body '$.to'}",
          "wa_id": "${jsonPath request.body '$.to'}"
        }
      ],
      "messages": [
        {
          "id": "wamid.${randomValue length=32 type='ALPHANUMERIC'}"
        }
      ]
    }
  }
} 